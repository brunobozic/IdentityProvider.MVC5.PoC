
<script type="text/javascript">

    // needed on several partials...
    $("#hiddenSegmentDependentOnCheckbox").hide();

    $(function () {
        $("#defineActiveUntil").on("change",
            function () {
                var $this = $(this);

                if ($('#defineActiveUntil').is(":checked ")) {
                    $("#hiddenSegmentDependentOnCheckbox").show();
                } else {
                    $("#hiddenSegmentDependentOnCheckbox").hide();
                }
            });
    });

    // attaching datepicker
    $(function () {
        $('#sandbox-container input').datepicker({
            format: "dd.mm.yyyy",
            maxViewMode: 2,
            todayBtn: "linked",
            clearBtn: true,
            language: "hr",
            todayHighlight: true
        });
    });

    // js for adding a new item to the grid
    $(function () {
        $("#loading").hide();
        $('#btnSubmit').click(function () {
            // catch a click an reroute it to a submit
            $('#frmNewItem').submit();
        });

        $("#frmNewItem").on("submit",
            function (event) {
                var $this = $(this);

                event.preventDefault(); // prevent normal resolution of the event, hijack it, and do your own thing

                $('#mdModal').find('.modal-body').html("");
                $("#loading").show();
                $('#btnSubmit').attr('disabled', 'disabled');

                var dataToPost = $(this).serialize({ checkboxesAsBools: true });

                console.log('javascriptSectionBottomPartial.cshtml data to post: ' + dataToPost)

                $.ajax({
                    type: $this.attr('method'),
                    url: $this.attr('action'),
                    data: dataToPost,
                    success: function (response) {

                        $('#mdModal').modal('toggle');
                        swal(
                            'Created!!',
                            'Your item has been created.',
                            'success'
                        ).then(function () {
                            location.reload();
                        });

                        return false;
                    },
                    error: function (response) {
                        swal(
                            'Error!',
                            'Your item has not been created. ' + response.ValidationIssues,
                            'error'
                        ).then(function () {
                            location.reload();
                        });;
                    },
                    complete: function () {
                        $("#loading").hide();
                        $('#btnSubmit').removeAttr('disabled');
                    }
                });
            });
    });
</script>